<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase数据添加工具</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .config-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .config-section h3 {
            color: #495057;
            margin-top: 0;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #495057;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            box-sizing: border-box;
        }
        
        .button-group {
            text-align: center;
            margin-top: 30px;
        }
        
        button {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 10px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .log-area {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
            white-space: pre-wrap;
        }
        
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔥 Firebase数据添加工具</h1>
        
        <div class="config-section">
            <h3>📋 Firebase配置</h3>
            <p>请填入你的Firebase项目配置信息：</p>
            
            <div class="form-group">
                <label for="apiKey">API Key:</label>
                <input type="text" id="apiKey" placeholder="your-api-key">
            </div>
            
            <div class="form-group">
                <label for="authDomain">Auth Domain:</label>
                <input type="text" id="authDomain" placeholder="your-project.firebaseapp.com">
            </div>
            
            <div class="form-group">
                <label for="projectId">Project ID:</label>
                <input type="text" id="projectId" placeholder="your-project-id">
            </div>
            
            <div class="form-group">
                <label for="storageBucket">Storage Bucket:</label>
                <input type="text" id="storageBucket" placeholder="your-project.appspot.com">
            </div>
            
            <div class="form-group">
                <label for="messagingSenderId">Messaging Sender ID:</label>
                <input type="text" id="messagingSenderId" placeholder="123456789">
            </div>
            
            <div class="form-group">
                <label for="appId">App ID:</label>
                <input type="text" id="appId" placeholder="your-app-id">
            </div>
        </div>
        
        <div class="button-group">
            <button onclick="addSampleData()" id="addDataBtn">
                📚 添加示例数据
            </button>
            <button onclick="clearLog()">
                🗑️ 清空日志
            </button>
        </div>
        
        <div id="status"></div>
        <div id="log" class="log-area" style="display: none;"></div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, doc, setDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        let db;
        
        // 示例数据
        const sampleAnimes = [
            {
                id: 'frieren',
                title: '葬送的芙莉莲',
                subtitle: 'Frieren: Beyond Journey\'s End / 葬送のフリーレン',
                coverImage: 'https://via.placeholder.com/300x420/FF6B6B/FFFFFF?text=葬送的芙莉莲',
                genres: ['奇幻', '冒险', '剧情'],
                studio: 'MADHOUSE',
                airDate: '2023年9月',
                totalEpisodes: 28,
                rating: 9.5,
                status: 'completed',
                summary: '在打倒魔王的冒险结束后，魔法使芙莉莲送别了勇者辛美尔一行人。对于活了一千多年的精灵来说，与人类共度的十年只不过是人生中的一瞬间。没有理解人类的芙莉莲，无法理解辛美尔临终时的话语，带着后悔踏上了新的旅程。',
                characters: [
                    {
                        name: '芙莉莲',
                        role: '主角',
                        avatar: 'https://via.placeholder.com/80x80/4ECDC4/FFFFFF?text=芙莉莲',
                        description: '活了一千多年的精灵魔法使，曾是勇者队伍的一员'
                    },
                    {
                        name: '费伦',
                        role: '主角',
                        avatar: 'https://via.placeholder.com/80x80/4ECDC4/FFFFFF?text=费伦',
                        description: '芙莉莲的弟子，年轻的人类魔法使'
                    }
                ],
                impressions: [
                    {
                        title: '时间的意义',
                        content: '这部作品让我重新思考了时间的意义。对于不同寿命的种族来说，时间的价值是如此不同。'
                    }
                ],
                episodes: [
                    {
                        number: 1,
                        title: '冒险的结束',
                        rating: 9.0,
                        comment: '完美的开篇，建立了整个故事的基调'
                    }
                ],
                awards: [
                    {
                        name: '2024年度最佳动画',
                        year: '2024',
                        category: '剧情类'
                    }
                ],
                links: [
                    {
                        name: '官方网站',
                        url: 'https://frieren-anime.jp/',
                        icon: '🌐',
                        description: '动画官方网站'
                    }
                ],
                records: [
                    {
                        date: '2023-09-29',
                        title: '开始观看',
                        description: '开始追这部期待已久的作品'
                    }
                ]
            },
            {
                id: 'demon-slayer',
                title: '鬼灭之刃',
                subtitle: 'Demon Slayer / 鬼滅の刃',
                coverImage: 'https://via.placeholder.com/300x420/FF6B6B/FFFFFF?text=鬼灭之刃',
                genres: ['动作', '超自然', '历史'],
                studio: 'ufotable',
                airDate: '2019年4月',
                totalEpisodes: 44,
                rating: 8.7,
                status: 'completed',
                summary: '大正时代，卖炭少年炭治郎的平凡幸福生活，在家人遭到鬼杀害的那一天发生了巨变。',
                characters: [
                    {
                        name: '灶门炭治郎',
                        role: '主角',
                        avatar: 'https://via.placeholder.com/80x80/4ECDC4/FFFFFF?text=炭治郎',
                        description: '心地善良的少年，为了拯救妹妹而成为鬼杀队员'
                    }
                ],
                impressions: [
                    {
                        title: '兄妹之情',
                        content: '炭治郎和祢豆子的兄妹情深深打动了我，这是整部作品的核心。'
                    }
                ],
                episodes: [
                    {
                        number: 19,
                        title: '火神',
                        rating: 10.0,
                        comment: '神作级别的一集，ufotable的作画巅峰'
                    }
                ],
                awards: [],
                links: [],
                records: []
            }
        ];

        const sampleMangas = [
            {
                id: 'spy-family',
                title: '间谍过家家',
                subtitle: 'SPY×FAMILY / スパイファミリー',
                coverImage: 'https://via.placeholder.com/300x420/FF6B6B/FFFFFF?text=间谍过家家',
                author: '远藤达哉',
                genres: ['喜剧', '动作', '家庭'],
                magazine: '少年Jump+',
                serialization: '2019年3月 - 连载中',
                currentChapter: 95,
                rating: 9.3,
                status: 'ongoing',
                summary: '为了潜入名门伊甸学园，间谍"黄昏"需要在一周内组建家庭。他收养了能读心的少女阿尼亚作为女儿，与杀手约儿假结婚。',
                characters: [
                    {
                        name: '洛伊德·福杰',
                        role: '父亲/间谍',
                        avatar: 'https://via.placeholder.com/80x80/4ECDC4/FFFFFF?text=洛伊德',
                        description: '代号"黄昏"的顶级间谍，为了任务组建了伪装家庭'
                    },
                    {
                        name: '阿尼亚·福杰',
                        role: '女儿/超能力者',
                        avatar: 'https://via.placeholder.com/80x80/4ECDC4/FFFFFF?text=阿尼亚',
                        description: '能够读心的少女，被洛伊德收养'
                    }
                ],
                impressions: [
                    {
                        title: '温馨的伪装家庭',
                        content: '虽然每个人都有秘密，但这个家庭却意外地温馨和谐，让人感动。'
                    }
                ],
                chapters: [
                    {
                        number: 1,
                        title: '行动开始',
                        rating: 9.0,
                        comment: '完美的开篇，建立了整个故事的设定'
                    }
                ],
                progress: {
                    current: 95,
                    total: 95,
                    startDate: '2019-03-25',
                    lastUpdate: '2024-01-15',
                    readingDays: 1500,
                    averageRating: 9.1
                },
                awards: [
                    {
                        name: '2022年度最佳漫画',
                        year: '2022',
                        category: '喜剧类'
                    }
                ],
                related: [
                    {
                        title: '间谍过家家 动画版',
                        type: '动画',
                        year: '2022',
                        image: 'https://via.placeholder.com/150x200/4ECDC4/FFFFFF?text=动画版'
                    }
                ],
                links: [
                    {
                        name: '官方网站',
                        url: 'https://spy-family.net/',
                        icon: '🌐',
                        description: '漫画官方网站'
                    }
                ]
            }
        ];

        // 日志函数
        function log(message, type = 'info') {
            const logElement = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.style.display = 'block';
            logElement.scrollTop = logElement.scrollHeight;
            
            console.log(message);
        }

        // 显示状态
        function showStatus(message, type = 'info') {
            const statusElement = document.getElementById('status');
            statusElement.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        // 清空日志
        window.clearLog = function() {
            document.getElementById('log').textContent = '';
            document.getElementById('log').style.display = 'none';
            document.getElementById('status').innerHTML = '';
        }

        // 添加示例数据
        window.addSampleData = async function() {
            const button = document.getElementById('addDataBtn');
            button.disabled = true;
            button.textContent = '正在添加数据...';
            
            try {
                // 获取配置
                const config = {
                    apiKey: document.getElementById('apiKey').value,
                    authDomain: document.getElementById('authDomain').value,
                    projectId: document.getElementById('projectId').value,
                    storageBucket: document.getElementById('storageBucket').value,
                    messagingSenderId: document.getElementById('messagingSenderId').value,
                    appId: document.getElementById('appId').value
                };

                // 验证配置
                if (!config.apiKey || !config.projectId) {
                    throw new Error('请填写完整的Firebase配置信息');
                }

                // 初始化Firebase
                log('正在初始化Firebase...');
                const app = initializeApp(config);
                db = getFirestore(app);
                
                showStatus('✅ Firebase初始化成功', 'success');
                log('Firebase初始化成功');

                // 添加动画数据
                log('开始添加动画数据...');
                for (const anime of sampleAnimes) {
                    await setDoc(doc(db, 'animes', anime.id), anime);
                    log(`✅ 已添加动画: ${anime.title}`);
                }

                // 添加漫画数据
                log('开始添加漫画数据...');
                for (const manga of sampleMangas) {
                    await setDoc(doc(db, 'mangas', manga.id), manga);
                    log(`✅ 已添加漫画: ${manga.title}`);
                }

                showStatus('🎉 所有示例数据添加完成！', 'success');
                log('🎉 所有示例数据添加完成！');

            } catch (error) {
                console.error('添加数据时出错:', error);
                showStatus(`❌ 添加数据失败: ${error.message}`, 'error');
                log(`❌ 错误: ${error.message}`);
            } finally {
                button.disabled = false;
                button.textContent = '📚 添加示例数据';
            }
        }
    </script>
</body>
</html>