<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebaseæ•°æ®æ·»åŠ å·¥å…·</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .config-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .config-section h3 {
            color: #495057;
            margin-top: 0;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #495057;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            box-sizing: border-box;
        }
        
        .button-group {
            text-align: center;
            margin-top: 30px;
        }
        
        button {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 10px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .log-area {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
            white-space: pre-wrap;
        }
        
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”¥ Firebaseæ•°æ®æ·»åŠ å·¥å…·</h1>
        
        <div class="config-section">
            <h3>ğŸ“‹ Firebaseé…ç½®</h3>
            <p>è¯·å¡«å…¥ä½ çš„Firebaseé¡¹ç›®é…ç½®ä¿¡æ¯ï¼š</p>
            
            <div class="form-group">
                <label for="apiKey">API Key:</label>
                <input type="text" id="apiKey" placeholder="your-api-key">
            </div>
            
            <div class="form-group">
                <label for="authDomain">Auth Domain:</label>
                <input type="text" id="authDomain" placeholder="your-project.firebaseapp.com">
            </div>
            
            <div class="form-group">
                <label for="projectId">Project ID:</label>
                <input type="text" id="projectId" placeholder="your-project-id">
            </div>
            
            <div class="form-group">
                <label for="storageBucket">Storage Bucket:</label>
                <input type="text" id="storageBucket" placeholder="your-project.appspot.com">
            </div>
            
            <div class="form-group">
                <label for="messagingSenderId">Messaging Sender ID:</label>
                <input type="text" id="messagingSenderId" placeholder="123456789">
            </div>
            
            <div class="form-group">
                <label for="appId">App ID:</label>
                <input type="text" id="appId" placeholder="your-app-id">
            </div>
        </div>
        
        <div class="button-group">
            <button onclick="addSampleData()" id="addDataBtn">
                ğŸ“š æ·»åŠ ç¤ºä¾‹æ•°æ®
            </button>
            <button onclick="clearLog()">
                ğŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—
            </button>
        </div>
        
        <div id="status"></div>
        <div id="log" class="log-area" style="display: none;"></div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, doc, setDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        let db;
        
        // ç¤ºä¾‹æ•°æ®
        const sampleAnimes = [
            {
                id: 'frieren',
                title: 'è‘¬é€çš„èŠ™è‰è²',
                subtitle: 'Frieren: Beyond Journey\'s End / è‘¬é€ã®ãƒ•ãƒªãƒ¼ãƒ¬ãƒ³',
                coverImage: 'https://via.placeholder.com/300x420/FF6B6B/FFFFFF?text=è‘¬é€çš„èŠ™è‰è²',
                genres: ['å¥‡å¹»', 'å†’é™©', 'å‰§æƒ…'],
                studio: 'MADHOUSE',
                airDate: '2023å¹´9æœˆ',
                totalEpisodes: 28,
                rating: 9.5,
                status: 'completed',
                summary: 'åœ¨æ‰“å€’é­”ç‹çš„å†’é™©ç»“æŸåï¼Œé­”æ³•ä½¿èŠ™è‰è²é€åˆ«äº†å‹‡è€…è¾›ç¾å°”ä¸€è¡Œäººã€‚å¯¹äºæ´»äº†ä¸€åƒå¤šå¹´çš„ç²¾çµæ¥è¯´ï¼Œä¸äººç±»å…±åº¦çš„åå¹´åªä¸è¿‡æ˜¯äººç”Ÿä¸­çš„ä¸€ç¬é—´ã€‚æ²¡æœ‰ç†è§£äººç±»çš„èŠ™è‰è²ï¼Œæ— æ³•ç†è§£è¾›ç¾å°”ä¸´ç»ˆæ—¶çš„è¯è¯­ï¼Œå¸¦ç€åæ‚”è¸ä¸Šäº†æ–°çš„æ—…ç¨‹ã€‚',
                characters: [
                    {
                        name: 'èŠ™è‰è²',
                        role: 'ä¸»è§’',
                        avatar: 'https://via.placeholder.com/80x80/4ECDC4/FFFFFF?text=èŠ™è‰è²',
                        description: 'æ´»äº†ä¸€åƒå¤šå¹´çš„ç²¾çµé­”æ³•ä½¿ï¼Œæ›¾æ˜¯å‹‡è€…é˜Ÿä¼çš„ä¸€å‘˜'
                    },
                    {
                        name: 'è´¹ä¼¦',
                        role: 'ä¸»è§’',
                        avatar: 'https://via.placeholder.com/80x80/4ECDC4/FFFFFF?text=è´¹ä¼¦',
                        description: 'èŠ™è‰è²çš„å¼Ÿå­ï¼Œå¹´è½»çš„äººç±»é­”æ³•ä½¿'
                    }
                ],
                impressions: [
                    {
                        title: 'æ—¶é—´çš„æ„ä¹‰',
                        content: 'è¿™éƒ¨ä½œå“è®©æˆ‘é‡æ–°æ€è€ƒäº†æ—¶é—´çš„æ„ä¹‰ã€‚å¯¹äºä¸åŒå¯¿å‘½çš„ç§æ—æ¥è¯´ï¼Œæ—¶é—´çš„ä»·å€¼æ˜¯å¦‚æ­¤ä¸åŒã€‚'
                    }
                ],
                episodes: [
                    {
                        number: 1,
                        title: 'å†’é™©çš„ç»“æŸ',
                        rating: 9.0,
                        comment: 'å®Œç¾çš„å¼€ç¯‡ï¼Œå»ºç«‹äº†æ•´ä¸ªæ•…äº‹çš„åŸºè°ƒ'
                    }
                ],
                awards: [
                    {
                        name: '2024å¹´åº¦æœ€ä½³åŠ¨ç”»',
                        year: '2024',
                        category: 'å‰§æƒ…ç±»'
                    }
                ],
                links: [
                    {
                        name: 'å®˜æ–¹ç½‘ç«™',
                        url: 'https://frieren-anime.jp/',
                        icon: 'ğŸŒ',
                        description: 'åŠ¨ç”»å®˜æ–¹ç½‘ç«™'
                    }
                ],
                records: [
                    {
                        date: '2023-09-29',
                        title: 'å¼€å§‹è§‚çœ‹',
                        description: 'å¼€å§‹è¿½è¿™éƒ¨æœŸå¾…å·²ä¹…çš„ä½œå“'
                    }
                ]
            },
            {
                id: 'demon-slayer',
                title: 'é¬¼ç­ä¹‹åˆƒ',
                subtitle: 'Demon Slayer / é¬¼æ»…ã®åˆƒ',
                coverImage: 'https://via.placeholder.com/300x420/FF6B6B/FFFFFF?text=é¬¼ç­ä¹‹åˆƒ',
                genres: ['åŠ¨ä½œ', 'è¶…è‡ªç„¶', 'å†å²'],
                studio: 'ufotable',
                airDate: '2019å¹´4æœˆ',
                totalEpisodes: 44,
                rating: 8.7,
                status: 'completed',
                summary: 'å¤§æ­£æ—¶ä»£ï¼Œå–ç‚­å°‘å¹´ç‚­æ²»éƒçš„å¹³å‡¡å¹¸ç¦ç”Ÿæ´»ï¼Œåœ¨å®¶äººé­åˆ°é¬¼æ€å®³çš„é‚£ä¸€å¤©å‘ç”Ÿäº†å·¨å˜ã€‚',
                characters: [
                    {
                        name: 'ç¶é—¨ç‚­æ²»éƒ',
                        role: 'ä¸»è§’',
                        avatar: 'https://via.placeholder.com/80x80/4ECDC4/FFFFFF?text=ç‚­æ²»éƒ',
                        description: 'å¿ƒåœ°å–„è‰¯çš„å°‘å¹´ï¼Œä¸ºäº†æ‹¯æ•‘å¦¹å¦¹è€Œæˆä¸ºé¬¼æ€é˜Ÿå‘˜'
                    }
                ],
                impressions: [
                    {
                        title: 'å…„å¦¹ä¹‹æƒ…',
                        content: 'ç‚­æ²»éƒå’Œç¥¢è±†å­çš„å…„å¦¹æƒ…æ·±æ·±æ‰“åŠ¨äº†æˆ‘ï¼Œè¿™æ˜¯æ•´éƒ¨ä½œå“çš„æ ¸å¿ƒã€‚'
                    }
                ],
                episodes: [
                    {
                        number: 19,
                        title: 'ç«ç¥',
                        rating: 10.0,
                        comment: 'ç¥ä½œçº§åˆ«çš„ä¸€é›†ï¼Œufotableçš„ä½œç”»å·…å³°'
                    }
                ],
                awards: [],
                links: [],
                records: []
            }
        ];

        const sampleMangas = [
            {
                id: 'spy-family',
                title: 'é—´è°è¿‡å®¶å®¶',
                subtitle: 'SPYÃ—FAMILY / ã‚¹ãƒ‘ã‚¤ãƒ•ã‚¡ãƒŸãƒªãƒ¼',
                coverImage: 'https://via.placeholder.com/300x420/FF6B6B/FFFFFF?text=é—´è°è¿‡å®¶å®¶',
                author: 'è¿œè—¤è¾¾å“‰',
                genres: ['å–œå‰§', 'åŠ¨ä½œ', 'å®¶åº­'],
                magazine: 'å°‘å¹´Jump+',
                serialization: '2019å¹´3æœˆ - è¿è½½ä¸­',
                currentChapter: 95,
                rating: 9.3,
                status: 'ongoing',
                summary: 'ä¸ºäº†æ½œå…¥åé—¨ä¼Šç”¸å­¦å›­ï¼Œé—´è°"é»„æ˜"éœ€è¦åœ¨ä¸€å‘¨å†…ç»„å»ºå®¶åº­ã€‚ä»–æ”¶å…»äº†èƒ½è¯»å¿ƒçš„å°‘å¥³é˜¿å°¼äºšä½œä¸ºå¥³å„¿ï¼Œä¸æ€æ‰‹çº¦å„¿å‡ç»“å©šã€‚',
                characters: [
                    {
                        name: 'æ´›ä¼Šå¾·Â·ç¦æ°',
                        role: 'çˆ¶äº²/é—´è°',
                        avatar: 'https://via.placeholder.com/80x80/4ECDC4/FFFFFF?text=æ´›ä¼Šå¾·',
                        description: 'ä»£å·"é»„æ˜"çš„é¡¶çº§é—´è°ï¼Œä¸ºäº†ä»»åŠ¡ç»„å»ºäº†ä¼ªè£…å®¶åº­'
                    },
                    {
                        name: 'é˜¿å°¼äºšÂ·ç¦æ°',
                        role: 'å¥³å„¿/è¶…èƒ½åŠ›è€…',
                        avatar: 'https://via.placeholder.com/80x80/4ECDC4/FFFFFF?text=é˜¿å°¼äºš',
                        description: 'èƒ½å¤Ÿè¯»å¿ƒçš„å°‘å¥³ï¼Œè¢«æ´›ä¼Šå¾·æ”¶å…»'
                    }
                ],
                impressions: [
                    {
                        title: 'æ¸©é¦¨çš„ä¼ªè£…å®¶åº­',
                        content: 'è™½ç„¶æ¯ä¸ªäººéƒ½æœ‰ç§˜å¯†ï¼Œä½†è¿™ä¸ªå®¶åº­å´æ„å¤–åœ°æ¸©é¦¨å’Œè°ï¼Œè®©äººæ„ŸåŠ¨ã€‚'
                    }
                ],
                chapters: [
                    {
                        number: 1,
                        title: 'è¡ŒåŠ¨å¼€å§‹',
                        rating: 9.0,
                        comment: 'å®Œç¾çš„å¼€ç¯‡ï¼Œå»ºç«‹äº†æ•´ä¸ªæ•…äº‹çš„è®¾å®š'
                    }
                ],
                progress: {
                    current: 95,
                    total: 95,
                    startDate: '2019-03-25',
                    lastUpdate: '2024-01-15',
                    readingDays: 1500,
                    averageRating: 9.1
                },
                awards: [
                    {
                        name: '2022å¹´åº¦æœ€ä½³æ¼«ç”»',
                        year: '2022',
                        category: 'å–œå‰§ç±»'
                    }
                ],
                related: [
                    {
                        title: 'é—´è°è¿‡å®¶å®¶ åŠ¨ç”»ç‰ˆ',
                        type: 'åŠ¨ç”»',
                        year: '2022',
                        image: 'https://via.placeholder.com/150x200/4ECDC4/FFFFFF?text=åŠ¨ç”»ç‰ˆ'
                    }
                ],
                links: [
                    {
                        name: 'å®˜æ–¹ç½‘ç«™',
                        url: 'https://spy-family.net/',
                        icon: 'ğŸŒ',
                        description: 'æ¼«ç”»å®˜æ–¹ç½‘ç«™'
                    }
                ]
            }
        ];

        // æ—¥å¿—å‡½æ•°
        function log(message, type = 'info') {
            const logElement = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.style.display = 'block';
            logElement.scrollTop = logElement.scrollHeight;
            
            console.log(message);
        }

        // æ˜¾ç¤ºçŠ¶æ€
        function showStatus(message, type = 'info') {
            const statusElement = document.getElementById('status');
            statusElement.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        // æ¸…ç©ºæ—¥å¿—
        window.clearLog = function() {
            document.getElementById('log').textContent = '';
            document.getElementById('log').style.display = 'none';
            document.getElementById('status').innerHTML = '';
        }

        // æ·»åŠ ç¤ºä¾‹æ•°æ®
        window.addSampleData = async function() {
            const button = document.getElementById('addDataBtn');
            button.disabled = true;
            button.textContent = 'æ­£åœ¨æ·»åŠ æ•°æ®...';
            
            try {
                // è·å–é…ç½®
                const config = {
                    apiKey: document.getElementById('apiKey').value,
                    authDomain: document.getElementById('authDomain').value,
                    projectId: document.getElementById('projectId').value,
                    storageBucket: document.getElementById('storageBucket').value,
                    messagingSenderId: document.getElementById('messagingSenderId').value,
                    appId: document.getElementById('appId').value
                };

                // éªŒè¯é…ç½®
                if (!config.apiKey || !config.projectId) {
                    throw new Error('è¯·å¡«å†™å®Œæ•´çš„Firebaseé…ç½®ä¿¡æ¯');
                }

                // åˆå§‹åŒ–Firebase
                log('æ­£åœ¨åˆå§‹åŒ–Firebase...');
                const app = initializeApp(config);
                db = getFirestore(app);
                
                showStatus('âœ… Firebaseåˆå§‹åŒ–æˆåŠŸ', 'success');
                log('Firebaseåˆå§‹åŒ–æˆåŠŸ');

                // æ·»åŠ åŠ¨ç”»æ•°æ®
                log('å¼€å§‹æ·»åŠ åŠ¨ç”»æ•°æ®...');
                for (const anime of sampleAnimes) {
                    await setDoc(doc(db, 'animes', anime.id), anime);
                    log(`âœ… å·²æ·»åŠ åŠ¨ç”»: ${anime.title}`);
                }

                // æ·»åŠ æ¼«ç”»æ•°æ®
                log('å¼€å§‹æ·»åŠ æ¼«ç”»æ•°æ®...');
                for (const manga of sampleMangas) {
                    await setDoc(doc(db, 'mangas', manga.id), manga);
                    log(`âœ… å·²æ·»åŠ æ¼«ç”»: ${manga.title}`);
                }

                showStatus('ğŸ‰ æ‰€æœ‰ç¤ºä¾‹æ•°æ®æ·»åŠ å®Œæˆï¼', 'success');
                log('ğŸ‰ æ‰€æœ‰ç¤ºä¾‹æ•°æ®æ·»åŠ å®Œæˆï¼');

            } catch (error) {
                console.error('æ·»åŠ æ•°æ®æ—¶å‡ºé”™:', error);
                showStatus(`âŒ æ·»åŠ æ•°æ®å¤±è´¥: ${error.message}`, 'error');
                log(`âŒ é”™è¯¯: ${error.message}`);
            } finally {
                button.disabled = false;
                button.textContent = 'ğŸ“š æ·»åŠ ç¤ºä¾‹æ•°æ®';
            }
        }
    </script>
</body>
</html>